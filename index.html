<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Sistema Eleitoral Brasileiro — Guia Mobile</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{--main:#0b3b75;--accent:#63b3ed;--bg:#f4f6fb;--txt:#1e2532;--badge:#18a058}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--txt);line-height:1.7;font-size:1.11rem;-webkit-tap-highlight-color:transparent}
h1,h2{font-weight:700;color:var(--main)}
#banner{background:var(--main);color:#fff;font-size:.9rem;padding:.4rem .8rem;text-align:center}
#banner b{font-weight:600}
header{background:var(--main);color:#fff;padding:1.1rem;display:flex;justify-content:space-between;align-items:center}
header h1{font-size:1.25rem;margin-bottom:.15rem}
header small{font-size:.78rem}
#font-controls button{background:#fff;color:var(--main);border:none;margin-left:.5rem;padding:.25rem .6rem;border-radius:6px;font-weight:700;cursor:pointer}
#top-progress{height:6px;background:#cbd5e1;position:sticky;top:0;z-index:997}
#top-progress-inner{height:100%;width:0;background:var(--accent);transition:.3s}
main{max-width:900px;margin:auto;padding:1.2rem}
section{background:#fff;border-radius:20px;padding:2.1rem 1.2rem;margin-bottom:2.1rem;box-shadow:0 3px 16px rgba(0,0,0,.07)}
@media(max-width:600px){section{padding:1.2rem .7rem}body{font-size:1.16rem}h1{font-size:1.35rem}h2{font-size:1.08rem}}
.video-container{position:relative;width:100%;padding-bottom:56.25%;margin-top:.6rem;border-radius:16px;overflow:hidden;background:#000}
.video-container #yt-player{position:absolute;top:0;left:0;width:100%;height:100%}
.tl-btn,.check-btn{background:var(--main);color:#fff;border:none;border-radius:12px;padding:.63rem 1.2rem;margin-top:.7rem;font-size:1.05rem;cursor:pointer;transition:background .18s,transform .13s}
.tl-btn:active,.check-btn:active{background:#214d9b;transform:scale(.92)}
#timeline-range{width:100%}
#progress{height:10px;background:#cbd5e1;border-radius:7px;margin-top:1.1rem;overflow:hidden}
#progress-bar{height:100%;width:0;background:var(--main);transition:.3s}
#infographic .steps{display:flex;flex-direction:column;gap:1.05rem}
#infographic .step{border:1.5px solid #cbd5e1;border-radius:10px;overflow:hidden}
#infographic .step-header{background:var(--main);color:#fff;padding:1rem 1.1rem;font-size:1rem;cursor:pointer;font-weight:600;display:flex;align-items:center}
#infographic .step-header:after{content:"▼";margin-left:auto;transition:.25s;transform:rotate(-90deg)}
#infographic .step.expanded .step-header:after{transform:rotate(0)}
#infographic .step-content{display:none;padding:1.1rem;background:#f1f5f9;font-size:.99rem}
#infographic .step.expanded .step-content{display:block}
#curiosities li{background:#e2e8f0;margin:.8rem 0;padding:.95rem 1.3rem;border-radius:7px;border-left:5px solid var(--main)}
.quiz-question{margin-bottom:2.1rem}
.quiz-option{display:block;padding:.75rem 1.1rem;margin:.55rem 0;border:1.3px solid #b7c0d1;border-radius:13px;cursor:pointer;font-size:1.07rem}
.quiz-option.selected{background:#e0e7ff;border-color:#3f51b5}
.quiz-option.correct{background:#c8e6c9;border-color:#2e7d32}
.quiz-option.incorrect{background:#ffcdd2;border-color:#c62828}
.score-box{background:var(--main);color:#fff;text-align:center;border-radius:13px;padding:1rem 1.2rem;font-weight:600}
</style>
</head>

<body>
<div id="banner"><b>Recurso Educacional Aberto.</b> Sistema Eleitoral Brasileiro. José Francisco Fagundes Cangussu, UFRGS</div>
<header>
  <div><h1>Sistema Eleitoral Brasileiro</h1><small>Guia interativo • CC-BY 4.0</small></div>
  <div id="font-controls"><button id="font-dec">A−</button><button id="font-inc">A+</button></div>
</header>
<div id="top-progress"><div id="top-progress-inner"></div></div>

<main>
<!-- Objetivos -->
<section id="goals">
  <h2>O que você vai aprender</h2>
  <ul style="padding-left:1.2rem">
    <li>Competência 5 da BNCC – habilidade <strong>EM13CHS603</strong>.</li>
    <li>Identificar grandes marcos do sistema eleitoral brasileiro no período pós-ditadura.</li>
    <li>Compreender as regras e o funcionamento do sistema eleitoral brasileiro.</li>
  </ul>
</section>

<!-- Vídeo com auto-pause -->
<section id="intro-video">
  <h2>Assista primeiro (4 min 43 s)</h2>
  <div class="video-container"><div id="yt-player"></div></div>
  <button id="show-reflection" class="tl-btn">Continuar</button>

  <div id="reflection" style="display:none;margin-top:1.2rem">
    <h3>Reflexão rápida</h3>
    <p>Qual é a principal função da Justiça Eleitoral?</p>
    <label><input type="radio" name="r1" value="0"> Fiscalizar partidos</label><br>
    <label><input type="radio" name="r1" value="1"> Organizar e garantir a lisura das eleições</label><br>
    <button id="check-reflect" class="tl-btn" style="margin-top:.6rem">Verificar</button>
    <p id="reflect-feedback"></p>
  </div>
</section>

<!-- Linha do tempo -->
<section id="timeline">
  <h2>Linha do Tempo (1989 → 2021)</h2>
  <div style="display:flex;gap:.6rem;align-items:center">
    <button id="prev" class="tl-btn">◀</button>
    <input type="range" id="timeline-range" min="0" value="0">
    <button id="next" class="tl-btn">▶</button>
  </div>
  <div style="font-size:.93rem;opacity:.75;margin:.5em 0 .2em;">Dica: deslize ou use os botões</div>
  <h3 id="event-title"></h3><p id="event-desc"></p>
  <div id="progress"><div id="progress-bar"></div></div>
  <p id="xp" style="margin-top:.55rem;font-weight:600;color:var(--main)"></p>
</section>

<!-- Infográfico -->
<section id="infographic">
  <h2>Como Funciona o Voto no Brasil</h2>
  <div class="steps">
    <!-- ... (infográfico intacto) ... -->
  </div>
</section>

<!-- Curiosidades -->
<section id="curiosities">
  <h2>Curiosidades</h2>
  <ul>
    <li><strong>Você sabia?</strong> Em 1932, as mulheres conquistaram o direito ao voto no Brasil.</li>
    <li><strong>Você sabia?</strong> Até 1988, menores de 18 anos eram proibidos de votar.</li>
    <li><strong>Você sabia?</strong> Votos em trânsito existem desde 2010 e valem só para presidente.</li>
    <li><strong>Você sabia?</strong> Desde 2000 o Brasil realiza eleições 100 % informatizadas.</li>
    <li><strong>Você sabia?</strong> O TSE foi criado em 1932 e integrou o Judiciário em 1945.</li>
    <li><strong>Você sabia?</strong> Mais de 2 milhões de mesários atuam voluntariamente a cada eleição.</li>
  </ul>
</section>

<!-- Simulador proporcional (mantém) -->
<section id="simulator"><!-- ... --></section>

<!-- Quiz (mantém) -->
<section id="quiz"><!-- ... --></section>
</main>

<section id="final-results" style="display:none;text-align:center;margin:2rem 1rem">
  <h2>Resultado Final</h2>
  <div id="score-final" class="score-box" style="margin:auto"></div>
  <button id="restart-btn" class="tl-btn" style="margin-top:1rem">Tentar novamente</button>
</section>

<button onclick="sharePage()" style="position:fixed;left:18px;bottom:18px;background:var(--accent);color:#fff;border:none;border-radius:40px;padding:.7em 1.2em;font-weight:600">Compartilhar</button>

<!-- YouTube Iframe API -->
<script src="https://www.youtube.com/iframe_api"></script>

<script>
/* ========= CONTROLE DE FONTE ========= */
let fs=+sessionStorage.getItem('fs')||1;
const setFs=()=>{document.documentElement.style.fontSize=(1.11*fs)+'rem';sessionStorage.setItem('fs',fs)};
document.getElementById('font-inc').onclick=()=>{fs=Math.max(.8,Math.min(1.5,fs+.1));setFs()};
document.getElementById('font-dec').onclick=()=>{fs=Math.max(.8,Math.min(1.5,fs-.1));setFs()};setFs();

/* ========= VÍDEO COM AUTO-PAUSE ========= */
let ytPlayer;
function onYouTubeIframeAPIReady(){
  ytPlayer=new YT.Player('yt-player',{
    width:'100%',height:'100%',
    videoId:'M5eXCGEk8AQ',
    playerVars:{start:0,rel:0,modestbranding:1,playsinline:1},
    events:{onStateChange:onYTState}
  });
}
function onYTState(e){
  if(e.data===YT.PlayerState.PLAYING){
    const limit=283;                // 4 min 43 s
    const checker=setInterval(()=>{
      if(ytPlayer.getCurrentTime()>=limit){
        ytPlayer.pauseVideo();
        clearInterval(checker);
        // rola até o botão "Continuar"
        document.getElementById('show-reflection').scrollIntoView({behavior:'smooth'});
      }
    },500);
  }
}

/* ========= MOSTRAR REFLEXÃO ========= */
document.getElementById('show-reflection').onclick=()=>{
  document.getElementById('reflection').style.display='block';
  document.getElementById('show-reflection').style.display='none';
};
document.getElementById('check-reflect').onclick=()=>{
  const sel=[...document.querySelectorAll('input[name=r1]')].find(r=>r.checked);
  if(!sel)return;
  const fb=document.getElementById('reflect-feedback');
  fb.textContent=sel.value==='1'?'Correto!':'Não é isso, tente novamente.';
  fb.style.color=sel.value==='1'?'green':'red';
};

/* ========= RESTANTE DO JS (linha do tempo, simulador, quiz etc.) ========= */
/* ...  (toda a lógica existente permanece inalterada) ... */

/* share */
function sharePage(){navigator.share?navigator.share({title:document.title,url:location.href}):prompt('Copie o link:',location.href)}
</script>
</body>
</html>
